import*as THREE from"three";import"../styles/style.css";const shaderContext=require.context("../shaders",!1,/\.(vert|frag)$/),getShader=e=>{const a=shaderContext(`./${e}`);return a.default||a},bakedTextures=require.context("../../public/textures/baked",!1,/\.png$/),material=new THREE.ShaderMaterial({vertexShader:getShader("ocean.vert"),fragmentShader:getShader("ocean.frag"),uniforms:{uHeightMapA:{value:null},uHeightMapB:{value:null},uNormalMapA:{value:null},uNormalMapB:{value:null},uFoamMapA:{value:null},uFoamMapB:{value:null},uLerp:{value:0},uHeightScale:{value:3.5},uEnvMap:{value:null},uWorldPos:{value:new THREE.Vector3},fogColor:{value:new THREE.Color(7730)},fogNear:{value:10},fogFar:{value:100}},transparent:!0,side:THREE.DoubleSide});export function initOcean(){const e=document.getElementById("ocean-bg-container"),a=new THREE.Scene,t=new THREE.PerspectiveCamera(29,e.clientWidth/e.clientHeight,.1,1e3);t.position.set(0,10,20),t.lookAt(0,0,-40);const n=new THREE.WebGLRenderer({antialias:!0,alpha:!0});n.setSize(e.clientWidth,e.clientHeight),e.appendChild(n.domElement);const r=new THREE.TextureLoader,l=(new THREE.CubeTextureLoader).setPath("/textures/cube/sunset-sky/").load(["px.png","nx.png","py.png","ny.png","pz.png","nz.png"],e=>{a.background=e,material.uniforms.uEnvMap.value=e,console.log("Environment map loaded successfully.")},void 0,e=>{console.error("Environment map loaded failed.",e)});material.uniforms.uEnvMap.value=l;const u=[],o=[],i=[];for(let e=1;e<=60;e++){const a=r.load(`./textures/baked/height_${e}.png`),t=r.load(`./textures/baked/normal_${e}.png`),n=r.load(`./textures/baked/foam_${e}.png`);u.push(a),o.push(t),i.push(n)}const s=new THREE.PlaneGeometry(120,120,512,512),m=new THREE.Mesh(s,material);m.rotateX(-Math.PI/2),a.add(m),requestAnimationFrame(function e(r){requestAnimationFrame(e);const l=r/100%60,s=Math.floor(l),m=(s+1)%60,p=l-s;material.uniforms.uHeightMapA.value=u[s],material.uniforms.uHeightMapB.value=u[m],material.uniforms.uNormalMapA.value=o[s],material.uniforms.uNormalMapB.value=o[m],material.uniforms.uFoamMapA.value=i[s],material.uniforms.uFoamMapB.value=i[m],material.uniforms.uLerp.value=p,n.render(a,t)})}